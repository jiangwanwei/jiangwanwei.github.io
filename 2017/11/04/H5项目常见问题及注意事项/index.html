<!-- build time:Thu Sep 05 2019 20:45:04 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="https://cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.css" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3"><link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222"><meta name="keywords" content="JavaScript,HTML,CSS,"><meta name="description" content="Meta基础知识：H5页面窗口自动调整到设备宽度，并禁止用户缩放页面1234567891011121314151617181920212223// 一、HTML页面结构&amp;lt;meta name=&amp;quot;viewport&amp;quot; content=&amp;quot;width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scal"><meta name="keywords" content="JavaScript,HTML,CSS"><meta property="og:type" content="article"><meta property="og:title" content="H5项目常见问题及注意事项"><meta property="og:url" content="http://yoursite.com/2017/11/04/H5项目常见问题及注意事项/index.html"><meta property="og:site_name" content="Vay&#39;s Blog"><meta property="og:description" content="Meta基础知识：H5页面窗口自动调整到设备宽度，并禁止用户缩放页面1234567891011121314151617181920212223// 一、HTML页面结构&amp;lt;meta name=&amp;quot;viewport&amp;quot; content=&amp;quot;width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scal"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2019-08-18T14:43:48.785Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="H5项目常见问题及注意事项"><meta name="twitter:description" content="Meta基础知识：H5页面窗口自动调整到设备宽度，并禁止用户缩放页面1234567891011121314151617181920212223// 一、HTML页面结构&amp;lt;meta name=&amp;quot;viewport&amp;quot; content=&amp;quot;width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scal"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",version:"5.1.3",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://yoursite.com/2017/11/04/H5项目常见问题及注意事项/"><title>H5项目常见问题及注意事项 | Vay's Blog</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Vay's Blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">withYou</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-list"></i><br>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/04/H5项目常见问题及注意事项/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="jiangwanwei"><meta itemprop="description" content=""><meta itemprop="image" content="/images/raul.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Vay's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">H5项目常见问题及注意事项</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-04T22:16:29+08:00">2017-11-04 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/前端/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="Meta基础知识："><a href="#Meta基础知识：" class="headerlink" title="Meta基础知识："></a>Meta基础知识：</h2><h3 id="H5页面窗口自动调整到设备宽度，并禁止用户缩放页面"><a href="#H5页面窗口自动调整到设备宽度，并禁止用户缩放页面" class="headerlink" title="H5页面窗口自动调整到设备宽度，并禁止用户缩放页面"></a>H5页面窗口自动调整到设备宽度，并禁止用户缩放页面</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">// 一、HTML页面结构</div><div class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; /&gt;</div><div class="line">// width    设置viewport宽度，为一个正整数，或字符串‘device-width’</div><div class="line">// height   设置viewport高度，一般设置了宽度，会自动解析出高度，可以不用设置</div><div class="line">// initial-scale    默认缩放比例，为一个数字，可以带小数</div><div class="line">// minimum-scale    允许用户最小缩放比例，为一个数字，可以带小数</div><div class="line">// maximum-scale    允许用户最大缩放比例，为一个数字，可以带小数</div><div class="line">// user-scalable    是否允许手动缩放</div><div class="line"></div><div class="line">// 二、JS动态判断</div><div class="line">var phoneWidth =  parseInt(window.screen.width);</div><div class="line">var phoneScale = phoneWidth/640;</div><div class="line">var ua = navigator.userAgent;</div><div class="line">if (/Android (\d+\.\d+)/.test(ua))&#123;</div><div class="line">    var version = parseFloat(RegExp.$1);</div><div class="line">    if(version&gt;2.3)&#123;</div><div class="line">        document.write(&apos;&lt;meta name=&quot;viewport&quot; content=&quot;width=640, minimum-scale = &apos;+phoneScale+&apos;, maximum-scale = &apos;+phoneScale+&apos;, target-densitydpi=device-dpi&quot;&gt;&apos;);</div><div class="line">    &#125;else&#123;</div><div class="line">        document.write(&apos;&lt;meta name=&quot;viewport&quot; content=&quot;width=640, target-densitydpi=device-dpi&quot;&gt;&apos;);</div><div class="line">    &#125;</div><div class="line">&#125; else &#123;</div><div class="line">    document.write(&apos;&lt;meta name=&quot;viewport&quot; content=&quot;width=640, user-scalable=no, target-densitydpi=device-dpi&quot;&gt;&apos;);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="空白页基本meta标签"><a href="#空白页基本meta标签" class="headerlink" title="空白页基本meta标签"></a>空白页基本meta标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 设置缩放 --&gt;</div><div class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, user-scalable=no, minimal-ui&quot; /&gt;</div><div class="line">&lt;!-- 可隐藏地址栏，仅针对IOS的Safari（注：IOS7.0版本以后，safari上已看不到效果） --&gt;</div><div class="line">&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot; /&gt;</div><div class="line">&lt;!-- 仅针对IOS的Safari顶端状态条的样式（可选default/black/black-translucent ） --&gt;</div><div class="line">&lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black&quot; /&gt;</div><div class="line">&lt;!-- IOS中禁用将数字识别为电话号码/忽略Android平台中对邮箱地址的识别 --&gt;</div><div class="line">&lt;meta name=&quot;format-detection&quot;content=&quot;telephone=no, email=no&quot; /&gt;</div></pre></td></tr></table></figure><h3 id="其他meta标签"><a href="#其他meta标签" class="headerlink" title="其他meta标签"></a>其他meta标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 启用360浏览器的极速模式(webkit) --&gt;</div><div class="line">&lt;meta name=&quot;renderer&quot; content=&quot;webkit&quot;&gt;</div><div class="line">&lt;!-- 避免IE使用兼容模式 --&gt;</div><div class="line">&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</div><div class="line">&lt;!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 --&gt;</div><div class="line">&lt;meta name=&quot;HandheldFriendly&quot; content=&quot;true&quot;&gt;</div><div class="line">&lt;!-- 微软的老式浏览器 --&gt;</div><div class="line">&lt;meta name=&quot;MobileOptimized&quot; content=&quot;320&quot;&gt;</div><div class="line">&lt;!-- uc强制竖屏 --&gt;</div><div class="line">&lt;meta name=&quot;screen-orientation&quot; content=&quot;portrait&quot;&gt;</div><div class="line">&lt;!-- QQ强制竖屏 --&gt;</div><div class="line">&lt;meta name=&quot;x5-orientation&quot; content=&quot;portrait&quot;&gt;</div><div class="line">&lt;!-- UC强制全屏 --&gt;</div><div class="line">&lt;meta name=&quot;full-screen&quot; content=&quot;yes&quot;&gt;</div><div class="line">&lt;!-- QQ强制全屏 --&gt;</div><div class="line">&lt;meta name=&quot;x5-fullscreen&quot; content=&quot;true&quot;&gt;</div><div class="line">&lt;!-- UC应用模式 --&gt;</div><div class="line">&lt;meta name=&quot;browsermode&quot; content=&quot;application&quot;&gt;</div><div class="line">&lt;!-- QQ应用模式 --&gt;</div><div class="line">&lt;meta name=&quot;x5-page-mode&quot; content=&quot;app&quot;&gt;</div><div class="line">&lt;!-- windows phone 点击无高光 --&gt;</div><div class="line">&lt;meta name=&quot;msapplication-tap-highlight&quot; content=&quot;no&quot;&gt;</div></pre></td></tr></table></figure><h2 id="常见问题："><a href="#常见问题：" class="headerlink" title="常见问题："></a>常见问题：</h2><h3 id="移动端如何定义字体font-family"><a href="#移动端如何定义字体font-family" class="headerlink" title="移动端如何定义字体font-family"></a>移动端如何定义字体font-family</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">@ --------------------------------------中文字体的英文名称</div><div class="line">@ 宋体      SimSun</div><div class="line">@ 黑体      SimHei</div><div class="line">@ 微信雅黑   Microsoft Yahei</div><div class="line">@ 微软正黑体 Microsoft JhengHei</div><div class="line">@ 新宋体    NSimSun</div><div class="line">@ 新细明体  MingLiU</div><div class="line">@ 细明体    MingLiU</div><div class="line">@ 标楷体    DFKai-SB</div><div class="line">@ 仿宋     FangSong</div><div class="line">@ 楷体     KaiTi</div><div class="line">@ 仿宋_GB2312  FangSong_GB2312</div><div class="line">@ 楷体_GB2312  KaiTi_GB2312  </div><div class="line">@</div><div class="line">@ 说明：中文字体多数使用宋体、雅黑，英文用Helvetica</div><div class="line"> </div><div class="line">body &#123; font-family: Microsoft Yahei,SimSun,Helvetica; &#125;</div></pre></td></tr></table></figure><h3 id="打电话发短信写邮件怎么实现"><a href="#打电话发短信写邮件怎么实现" class="headerlink" title="打电话发短信写邮件怎么实现"></a>打电话发短信写邮件怎么实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">// 一、打电话</div><div class="line">&lt;a href=&quot;tel:0755-10086&quot;&gt;打电话给:0755-10086&lt;/a&gt;</div><div class="line"> </div><div class="line">//  二、发短信，winphone系统无效</div><div class="line">&lt;a href=&quot;sms:10086&quot;&gt;发短信给: 10086&lt;/a&gt;</div><div class="line"> </div><div class="line">// 三、写邮件</div><div class="line">//注：在添加这些功能时，第一个功能以&quot;?&quot;开头，后面的以&quot;&amp;&quot;开头</div><div class="line">//1.普通邮件</div><div class="line">&lt;a href=&quot;mailto:863139978@qq.com&quot;&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//2.收件地址后添加?cc=开头，可添加抄送地址（Android存在兼容问题）</div><div class="line">&lt;a href=&quot;mailto:863139978@qq.com?cc=zhangqian0406@yeah.net&quot;&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//3.跟着抄送地址后，写上&amp;bcc=,可添加密件抄送地址（Android存在兼容问题）</div><div class="line">&lt;a href=&quot;mailto:863139978@qq.com?cc=zhangqian0406@yeah.net&amp;bcc=384900096@qq.com&quot;&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//4.包含多个收件人、抄送、密件抄送人，用分号(;)隔开多个邮件人的地址</div><div class="line">&lt;a href=&quot;mailto:863139978@qq.com;384900096@qq.com&quot;&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//5.包含主题，用?subject=</div><div class="line">&lt;a href=&quot;mailto:863139978@qq.com?subject=邮件主题&quot;&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//6.包含内容，用?body=;如内容包含文本，使用%0A给文本换行 </div><div class="line">&lt;a href=&quot;mailto:863139978@qq.com?body=邮件主题内容%0A腾讯诚信%0A期待您的到来&quot;&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//7.内容包含链接，含http(s)://等的文本自动转化为链接</div><div class="line">&lt;a href=&quot;mailto:863139978@qq.com?body=http://www.baidu.com&quot;&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//8.内容包含图片（PC不支持）</div><div class="line">&lt;a href=&quot;mailto:863139978@qq.com?body=&lt;img src=&apos;images/1.jpg&apos; /&gt;&quot;&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//9.完整示例</div><div class="line">&lt;a href=&quot;mailto:863139978@qq.com;384900096@qq.com?cc=zhangqian0406@yeah.net&amp;bcc=993233461@qq.com&amp;subject=[邮件主题]&amp;body=腾讯诚邀您参与%0A%0Ahttp://www.baidu.com%0A%0A&lt;img src=&apos;images/1.jpg&apos; /&gt;&quot;&gt;点击我发邮件&lt;/a&gt;</div></pre></td></tr></table></figure><h3 id="移动端touch事件（区分webkit和winphone）"><a href="#移动端touch事件（区分webkit和winphone）" class="headerlink" title="移动端touch事件（区分webkit和winphone）"></a>移动端touch事件（区分webkit和winphone）</h3><p>/<em> 当用户手指放在移动设备在屏幕上滑动会触发的touch事件 </em>/</p><p>// 以下支持webkit</p><p>touchstart——当手指触碰屏幕时候发生。不管当前有多少只手指</p><p>touchmove——当手指在屏幕上滑动时连续触发。通常我们再滑屏页面，会调用event的preventDefault()可以阻止默认情况的发生：阻止页面滚动</p><p>touchend——当手指离开屏幕时触发</p><p>touchcancel——系统停止跟踪触摸时候会触发。例如在触摸过程中突然页面alert()一个提示框，此时会触发该事件，这个事件比较少用</p><p>//TouchEvent说明：</p><p>touches：屏幕上所有手指的信息</p><p>targetTouches：手指在目标区域的手指信息</p><p>changedTouches：最近一次触发该事件的手指信息</p><p>touchend时，touches与targetTouches信息会被删除，changedTouches保存的最后一次的信息，最好用于计算手指信息</p><p>//参数信息(changedTouches[0])</p><p>clientX、clientY在显示区的坐标</p><p>target：当前元素</p><p>//事件响应顺序</p><p>ontouchstart &gt; ontouchmove &gt; ontouchend &gt; onclick</p><p>// 以下支持winphone 8</p><p>MSPointerDown——当手指触碰屏幕时候发生。不管当前有多少只手指</p><p>MSPointerMove——当手指在屏幕上滑动时连续触发。通常我们再滑屏页面，会调用css的html{-ms-touch-action: none;}可以阻止默认情况的发生：阻止页面滚动</p><p>MSPointerUp——当手指离开屏幕时触发</p><h3 id="移动端click屏幕产生200-300ms的延时响应"><a href="#移动端click屏幕产生200-300ms的延时响应" class="headerlink" title="移动端click屏幕产生200-300ms的延时响应"></a>移动端click屏幕产生200-300ms的延时响应</h3><p>说明：移动设备上的web网页是有300ms延迟的，玩玩会造成按钮点击延迟甚至是点击失效。</p><p>以下是历史原因，来源一个公司内一个同事的分享：</p><p>2007年苹果发布首款iphone上IOS系统搭载的safari为了将适用于PC端上大屏幕的网页能比较好的展示在手机端上，使用了双击缩放(double tap to zoom)的方案，比如你在手机上用浏览器打开一个PC上的网页，你可能在看到页面内容虽然可以撑满整个屏幕，但是字体、图片都很小看不清，此时可以快速双击屏幕上的某一部分，你就能看清该部分放大后的内容，再次双击后能回到原始状态。</p><p>双击缩放是指用手指在屏幕上快速点击两次，iOS 自带的 Safari 浏览器会将网页缩放至原始比例。</p><p>原因就出在浏览器需要如何判断快速点击上，当用户在屏幕上单击某一个元素时候，例如跳转链接 <code>&lt;a href=&quot;#&quot;&gt;&lt;/a&gt;</code>，此处浏览器会先捕获该次单击，但浏览器不能决定用户是单纯要点击链接还是要双击该部分区域进行缩放操作，所以，捕获第一次单击后，浏览器会先Hold一段时间t，如果在t时间区间里用户未进行下一次点击，则浏览器会做单击跳转链接的处理，如果t时间里用户进行了第二次单击操作，则浏览器会禁止跳转，转而进行对该部分区域页面的缩放操作。那么这个时间区间t有多少呢？在IOS safari下，大概为300毫秒。这就是延迟的由来。造成的后果用户纯粹单击页面，页面需要过一段时间才响应，给用户慢体验感觉，对于web开发者来说是，页面js捕获click事件的回调函数处理，需要300ms后才生效，也就间接导致影响其他业务逻辑的处理。</p><blockquote><p>解决方案：<br>fastclick可以解决在手机上点击事件的300ms延迟<br>zepto的touch模块，tap事件也是为了解决在click的延迟问题</p></blockquote><h3 id="Rentina显示屏原理及设计方案"><a href="#Rentina显示屏原理及设计方案" class="headerlink" title="Rentina显示屏原理及设计方案"></a>Rentina显示屏原理及设计方案</h3><p>说明：retina屏是一种具备超高像素密度的液晶屏，同样大小的屏幕上显示的像素点由1个变为多个，如在同样带下的屏幕上，苹果设备的retina显示屏中，像素点1个变为4个。</p><p>在高清显示屏中的位图被放大，图片会变得模糊，因此移动端的视觉稿通常会设计为传统PC的2倍。</p><p>那么，前端的应对方案是：设计稿切出来的图片长宽保证为偶数，并使用<code>backgroud-size</code>把图片缩小为原来的1/2</p><p>//例如图片宽高为：200px*200px，那么写法如下<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.css&#123;width:100px;height:100px;background-size:100px 100px;&#125;</div></pre></td></tr></table></figure><p></p><p>//其它元素的取值为原来的1/2，例如视觉稿40px的字体，使用样式的写法为20px<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.css&#123;font-size:20px&#125;</div></pre></td></tr></table></figure><p></p><p>//image-set设计Rentina背景图</p><p>image-set,webkit私有属性，也是CSS4的属性，为解决Rentina屏幕下的图像而生。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">.css &#123;</div><div class="line">    background: url(images/bg.jpg) no-repeat center;</div><div class="line">    background: -webkit-image-set(</div><div class="line">    url(images/bg.jpg) 1x,     //支持image-set普通屏</div><div class="line">    url(images/bg-2x.jpg) 2x); //支持image-set的Rentinan</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><h3 id="点击元素产生背景或边框怎么去掉"><a href="#点击元素产生背景或边框怎么去掉" class="headerlink" title="点击元素产生背景或边框怎么去掉"></a>点击元素产生背景或边框怎么去掉</h3><p>ios用户点击一个链接，会出现一个半透明灰色遮罩, 如果想要禁用，可设置<code>-webkit-tap-highlight-color</code>的<code>alpha</code>值为0去除灰色半透明遮罩；</p><p>android用户点击一个链接，会出现一个边框或者半透明灰色遮罩, 不同生产商定义出来额效果不一样，可设置-webkit-tap-highlight-color的alpha值为0去除部分机器自带的效果；</p><p>winphone系统,点击标签产生的灰色半透明背景，能通过设置<code>&lt;meta name=&quot;msapplication-tap-highlight&quot; content=&quot;no&quot;&gt;</code>去掉；</p><p>特殊说明：有些机型去除不了，如小米2。对于按钮类还有个办法，不使用a或者input标签，直接用div标签<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">a,button,input,textarea &#123; </div><div class="line">    -webkit-tap-highlight-color: rgba(0,0,0,0); </div><div class="line">    -webkit-user-modify:read-write-plaintext-only; //-webkit-user-modify有个副作用，就是输入法不再能够输入多个字符</div><div class="line">&#125;</div><div class="line">// 也可以 </div><div class="line">* &#123; -webkit-tap-highlight-color: rgba(0,0,0,0); &#125;</div><div class="line">//winphone下</div><div class="line">&lt;meta name=&quot;msapplication-tap-highlight&quot; content=&quot;no&quot;&gt;</div></pre></td></tr></table></figure><p></p><h3 id="美化表单元素"><a href="#美化表单元素" class="headerlink" title="美化表单元素"></a>美化表单元素</h3><p>一、使用appearance改变webkit浏览器的默认外观<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">input,select &#123; -webkit-appearance:none; appearance: none; &#125;</div></pre></td></tr></table></figure><p></p><p>二、winphone下，使用伪元素改变表单元素默认外观</p><p>1.禁用select默认箭头，::-ms-expand修改表单控件下拉箭头，设置隐藏并使用背景图片来修饰<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">select::-ms-expand &#123; display:none; &#125;</div></pre></td></tr></table></figure><p></p><p>2.禁用radio和checkbox默认样式，::-ms-check修改表单复选框或单选框默认图标，设置隐藏并使用背景图片来修饰<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">input[type=radio]::-ms-check,</div><div class="line">input[type=checkbox]::-ms-check &#123; display:none; &#125;</div></pre></td></tr></table></figure><p></p><p>3.禁用pc端表单输入框默认清除按钮，::-ms-clear修改清除按钮，设置隐藏并使用背景图片来修饰<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">input[type=text]::-ms-clear,</div><div class="line">input[type=tel]::-ms-clear,</div><div class="line">input[type=number]::-ms-clear &#123; display:none; &#125;</div></pre></td></tr></table></figure><p></p><h3 id="移动端字体单位font-size选择px还是rem"><a href="#移动端字体单位font-size选择px还是rem" class="headerlink" title="移动端字体单位font-size选择px还是rem"></a>移动端字体单位font-size选择px还是rem</h3><p>如需适配多种移动设备，建议使用rem。以下为参考值：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">html &#123; font-size: 62.5%; &#125;   //10*16 = 62.5%</div><div class="line">//设置12px字体   这里注意在rem前要加上对应的px值，解决不支持rem的浏览器的兼容问题，做到优雅降级</div><div class="line">body &#123; font-size:12px; font-size:1.2rem; &#125;</div></pre></td></tr></table></figure><p></p><h3 id="超实用的CSS样式"><a href="#超实用的CSS样式" class="headerlink" title="超实用的CSS样式"></a>超实用的CSS样式</h3><p>去掉webkit的滚动条—— <code>display: none</code>;<br>//其他参数<br>::-webkit-scrollba //滚动条整体部分<br>::-webkit-scrollbar-thumb //滚动条内的小方块<br>::-webkit-scrollbar-track //滚动条轨道<br>::-webkit-scrollbar-button //滚动条轨道两端按钮<br>::-webkit-scrollbar-track-piece //滚动条中间部分，内置轨道<br>::-webkit-scrollbar-corner //边角，两个滚动条交汇处<br>::-webkit-resizer //两个滚动条的交汇处上用于通过拖动调整元素大小的小控件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">// 禁止长按链接与图片弹出菜单</div><div class="line">a,img &#123; -webkit-touch-callout: none &#125;    </div><div class="line"> </div><div class="line">// 禁止ios和android用户选中文字</div><div class="line">html,body &#123;-webkit-user-select:none; user-select: none; &#125;</div><div class="line"> </div><div class="line">// 改变输入框placeholder的颜色值</div><div class="line">::-webkit-input-placeholder &#123; /* WebKit browsers */</div><div class="line">color: #999; &#125;</div><div class="line">:-moz-placeholder &#123; /* Mozilla Firefox 4 to 18 */</div><div class="line">color: #999; &#125;</div><div class="line">::-moz-placeholder &#123; /* Mozilla Firefox 19+ */</div><div class="line">color: #999; &#125;</div><div class="line">:-ms-input-placeholder &#123; /* Internet Explorer 10+ */</div><div class="line">color: #999; &#125;</div><div class="line">input:focus::-webkit-input-placeholder&#123; color:#999; &#125;</div><div class="line"> </div><div class="line">// android上去掉语音输入按钮</div><div class="line">input::-webkit-input-speech-button &#123;display: none&#125;</div><div class="line"> </div><div class="line">// 阻止windows Phone的默认触摸事件</div><div class="line">/*说明：winphone下默认触摸事件事件使用e.preventDefault是无效的，可通过样式来禁用，如：*/</div><div class="line">html &#123; -ms-touch-action:none; &#125; //禁止winphone默认触摸事件</div></pre></td></tr></table></figure><h3 id="取消input在ios下，输入的时候英文首字母的默认大写"><a href="#取消input在ios下，输入的时候英文首字母的默认大写" class="headerlink" title="取消input在ios下，输入的时候英文首字母的默认大写"></a>取消input在ios下，输入的时候英文首字母的默认大写</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;input autocapitalize=&quot;off&quot; autocorrect=&quot;off&quot; /&gt;</div></pre></td></tr></table></figure><h3 id="手机拍照和上传图片"><a href="#手机拍照和上传图片" class="headerlink" title="手机拍照和上传图片"></a>手机拍照和上传图片</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//IOS有拍照、录像、选取本地图片功能，部分Android只有选择本地图片功能。Winphone不支持</div><div class="line">&lt;input type=&quot;file&quot; accept=&quot;images/*&quot; /&gt;</div><div class="line">&lt;input type=&quot;file&quot; accept=&quot;video/*&quot; /&gt;</div></pre></td></tr></table></figure><h3 id="屏幕旋转的事件和样式"><a href="#屏幕旋转的事件和样式" class="headerlink" title="屏幕旋转的事件和样式"></a>屏幕旋转的事件和样式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">//JS处理</div><div class="line">function orientInit()&#123;</div><div class="line">    var orientChk = document.documentElement.clientWidth &gt; document.documentElement.clientHeight?&apos;landscape&apos;:&apos;portrait&apos;;</div><div class="line">    if(orientChk ==&apos;lapdscape&apos;)&#123;</div><div class="line">        //这里是横屏下需要执行的事件</div><div class="line">    &#125;else&#123;</div><div class="line">        //这里是竖屏下需要执行的事件</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">orientInit();</div><div class="line">window.addEventListener(&apos;onorientationchange&apos; in window?&apos;orientationchange&apos;:&apos;resize&apos;, function()&#123;</div><div class="line">    setTimeout(orientInit, 100);</div><div class="line">&#125;,false)</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//CSS处理</div><div class="line">//竖屏时样式</div><div class="line">@media all and (orientation:portrait)&#123;   &#125;</div><div class="line">//横屏时样式</div><div class="line">@media all and (orientation:landscape)&#123;   &#125;</div></pre></td></tr></table></figure><h2 id="audio元素和video元素在ios和andriod中无法自动播放"><a href="#audio元素和video元素在ios和andriod中无法自动播放" class="headerlink" title="audio元素和video元素在ios和andriod中无法自动播放"></a>audio元素和video元素在ios和andriod中无法自动播放</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">//音频，写法一</div><div class="line">&lt;audio src=&quot;music/bg.mp3&quot; autoplay loop controls&gt;你的浏览器还不支持哦&lt;/audio&gt;</div><div class="line"> </div><div class="line">//音频，写法二</div><div class="line">&lt;audio controls=&quot;controls&quot;&gt; </div><div class="line">    &lt;source src=&quot;music/bg.ogg&quot; type=&quot;audio/ogg&quot;&gt;&lt;/source&gt;</div><div class="line">    &lt;source src=&quot;music/bg.mp3&quot; type=&quot;audio/mpeg&quot;&gt;&lt;/source&gt;</div><div class="line">    优先播放音乐bg.ogg，不支持在播放bg.mp3</div><div class="line">&lt;/audio&gt;</div><div class="line"> </div><div class="line">//JS绑定自动播放（操作window时，播放音乐）</div><div class="line">$(window).one(&apos;touchstart&apos;, function()&#123;</div><div class="line">    music.play();</div><div class="line">&#125;)</div><div class="line"> </div><div class="line">//微信下兼容处理</div><div class="line">document.addEventListener(&quot;WeixinJSBridgeReady&quot;, function () &#123;</div><div class="line">    music.play();</div><div class="line">&#125;, false);</div></pre></td></tr></table></figure><blockquote><p>小结</p><p>1.audio元素的autoplay属性在IOS及Android上无法使用，在PC端正常<br>2.audio元素没有设置controls时，在IOS及Android会占据空间大小，而在PC端Chrome是不会占据任何空间</p></blockquote><h3 id="重力感应事件"><a href="#重力感应事件" class="headerlink" title="重力感应事件"></a>重力感应事件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">// 运用HTML5的deviceMotion，调用重力感应事件</div><div class="line">if(window.DeviceMotionEvent)&#123;</div><div class="line">    document.addEventListener(&apos;devicemotion&apos;, deviceMotionHandler, false)</div><div class="line">&#125;   </div><div class="line"> </div><div class="line">var speed = 30;</div><div class="line">var x = y = z = lastX = lastY = lastZ = 0;</div><div class="line">function deviceMotionHandler(eventData)&#123;</div><div class="line">    var acceleration = event.accelerationIncludingGravity;</div><div class="line">    x = acceleration.x;</div><div class="line">    y = acceleration.y; </div><div class="line">    z = acceleration.z;</div><div class="line">    if(Math.abs(x-lastX)&gt;speed || Math.abs(y-lastY)&gt;speed || Math.abs(z-lastZ)&gt;speed )&#123;</div><div class="line">        //这里是摇动后要执行的方法 </div><div class="line">        yaoAfter();</div><div class="line">    &#125;</div><div class="line">    lastX = x;</div><div class="line">    lastY = y;</div><div class="line">    lastZ = z;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">function yaoAfter()&#123;</div><div class="line">    //do something</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="微信浏览器用户调整字体大小后页面矬了，怎么阻止用户调整"><a href="#微信浏览器用户调整字体大小后页面矬了，怎么阻止用户调整" class="headerlink" title="微信浏览器用户调整字体大小后页面矬了，怎么阻止用户调整"></a>微信浏览器用户调整字体大小后页面矬了，怎么阻止用户调整</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//以下代码可使Android机页面不再受用户字体缩放强制改变大小，但是会有1S左右延时，期间可以考虑loading来处理</div><div class="line">if (typeof(WeixinJSBridge) == &quot;undefined&quot;) &#123;</div><div class="line">    document.addEventListener(&quot;WeixinJSBridgeReady&quot;, function (e) &#123;</div><div class="line">        setTimeout(function()&#123;</div><div class="line">            WeixinJSBridge.invoke(&apos;setFontSizeCallback&apos;, &#123; &apos;fontSize&apos;:0&#125;, function(res)&#123;</div><div class="line">                alert(JSON.stringify(res));</div><div class="line">            &#125;)</div><div class="line">        &#125;, 0)</div><div class="line">    &#125;);</div><div class="line">&#125;else&#123;  </div><div class="line">    setTimeout(function()&#123;</div><div class="line">        WeixinJSBridge.invoke(&apos;setFontSizeCallback&apos;, &#123; &apos;fontSize&apos;:0&#125;, function(res)&#123;</div><div class="line">            alert(JSON.stringify(res));</div><div class="line">        &#125;)</div><div class="line">    &#125;, 0)   </div><div class="line">&#125;</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//IOS下可使用 -webkit-text-size-adjust禁止用户调整字体大小</div><div class="line">body &#123; -webkit-text-size-adjust:100%!important; &#125;</div></pre></td></tr></table></figure><blockquote><p>最好的解决方案：最好使用rem或百分比布局</p></blockquote><h3 id="定位的坑"><a href="#定位的坑" class="headerlink" title="定位的坑"></a>定位的坑</h3><p>fixed定位</p><p>1.ios下fixed元素容易定位出错，软键盘弹出时，影响fixed元素定位</p><p>2.android下fixed表现要比iOS更好，软键盘弹出时，不会影响fixed元素定位</p><p>3.ios4下不支持position:fixed</p><p>解决方案：使用<a href="http://cubiq.org/iscroll-5" target="_blank" rel="external">Iscroll</a>，如：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;wrapper&quot;&gt;</div><div class="line">        &lt;ul&gt;</div><div class="line">               &lt;li&gt;&lt;/li&gt;</div><div class="line">               .....</div><div class="line">        &lt;/ul&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;script src=&quot;iscroll.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script&gt;</div><div class="line">    var myscroll;</div><div class="line">    function loaded()&#123;</div><div class="line">        myscroll=new iScroll(&quot;wrapper&quot;);</div><div class="line">    &#125;</div><div class="line">    window.addEventListener(&quot;DOMContentLoaded&quot;,loaded,false);</div><div class="line">&lt;/script&gt;</div><div class="line"> </div><div class="line"> </div><div class="line">//position定位</div><div class="line">//Android下弹出软键盘弹出时，影响absolute元素定位</div><div class="line">//解决方案:</div><div class="line">var ua = navigator.userAgent.indexOf(&apos;Android&apos;);</div><div class="line">if(ua&gt;-1)&#123;</div><div class="line">    $(&apos;.ipt&apos;).on(&apos;focus&apos;, function()&#123;</div><div class="line">        $(&apos;.css&apos;).css(&#123;&apos;visibility&apos;:&apos;hidden&apos;&#125;)</div><div class="line">    &#125;).on(&apos;blur&apos;, function()&#123;</div><div class="line">        $(&apos;.css&apos;).css(&#123;&apos;visibility&apos;:&apos;visible&apos;&#125;)</div><div class="line">    &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><h3 id="播放视频不全屏"><a href="#播放视频不全屏" class="headerlink" title="播放视频不全屏"></a>播放视频不全屏</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;!--</div><div class="line">1.ios7+支持自动播放</div><div class="line">2.支持Airplay的设备（如：音箱、Apple TV)播放</div><div class="line">x-webkit-airplay=&quot;true&quot; </div><div class="line">3.播放视频不全屏</div><div class="line">webkit-playsinline=&quot;true&quot; </div><div class="line">--&gt;</div><div class="line">&lt;video x-webkit-airplay=&quot;true&quot; webkit-playsinline=&quot;true&quot; preload=&quot;auto&quot; autoplay src=&quot;http://&quot;&gt;&lt;/video&gt;</div></pre></td></tr></table></figure><h3 id="JS判断设备"><a href="#JS判断设备" class="headerlink" title="JS判断设备"></a>JS判断设备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">function deviceType()&#123;</div><div class="line">    var ua = navigator.userAgent;</div><div class="line">    var agent = [&quot;Android&quot;, &quot;iPhone&quot;, &quot;SymbianOS&quot;, &quot;Windows Phone&quot;, &quot;iPad&quot;, &quot;iPod&quot;];    </div><div class="line">    for(var i=0; i&lt;len,len = agent.length; i++)&#123;</div><div class="line">        if(ua.indexOf(agent[i])&gt;0)&#123;         </div><div class="line">            break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">deviceType();</div><div class="line">window.addEventListener(&apos;resize&apos;, function()&#123;</div><div class="line">    deviceType();</div><div class="line">&#125;)</div></pre></td></tr></table></figure><h3 id="JS判断微信浏览器"><a href="#JS判断微信浏览器" class="headerlink" title="JS判断微信浏览器"></a>JS判断微信浏览器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function isWeixin()&#123;</div><div class="line">    var ua = navigator.userAgent.toLowerCase();</div><div class="line">    if(ua.match(/MicroMessenger/i)==&apos;micromessenger&apos;)&#123;</div><div class="line">        return true;</div><div class="line">    &#125;else&#123;</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="android-2-3-bug"><a href="#android-2-3-bug" class="headerlink" title="android 2.3 bug"></a>android 2.3 bug</h3><p>1.<code>@-webkit-keyframes</code> 需要以0%开始100%结束，0%的百分号不能去掉</p><p>2.<code>after</code>和<code>before</code>伪类无法使用动画<code>animation</code></p><p>3.<code>border-radius</code>不支持%单位，如要兼容，可以给 <code>radius</code> 设置一下较大的值</p><p>4.<code>translate</code>百分比的写法和<code>scale</code>在一起会导致失效，例如：<code>-webkit-transform: translate(-50%,-50%) scale(-0.5, 1)</code></p><h3 id="android-4-x-bug"><a href="#android-4-x-bug" class="headerlink" title="android 4.x bug"></a>android 4.x bug</h3><p>1.三星 Galaxy S4中自带浏览器不支持border-radius缩写</p><p>2.同时设置border-radius和背景色的时候，背景色会溢出到圆角以外部分</p><p>3.部分手机(如三星)，a链接支持鼠标:visited事件，也就是说链接访问后文字变为紫色</p><p>4.android无法同时播放多音频audio</p><h3 id="消除transition闪屏"><a href="#消除transition闪屏" class="headerlink" title="消除transition闪屏"></a>消除transition闪屏</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">.css &#123;</div><div class="line">    -webkit-transform-style: preserve-3d;</div><div class="line">    -webkit-backface-visibility: hidden;</div><div class="line">    -webkit-perspective: 1000;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="开启硬件加速"><a href="#开启硬件加速" class="headerlink" title="开启硬件加速"></a>开启硬件加速</h3><p>目前，像 <code>Chrome/Filefox/Safari/IE9+</code> 以及最新版本 <code>Opera</code> 都支持硬件加速，当检测到某个DOM元素应用了某些CSS规则时就会自动开启，从而解决页面闪白，保证动画流畅。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">.css &#123;</div><div class="line">    -webkit-transform: translate3d(0,0,0);</div><div class="line">    -moz-transform: translate3d(0,0,0);</div><div class="line">    -ms-transform: translate3d(0,0,0);</div><div class="line">    transform: translate3d(0,0,0);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><h3 id="渲染优化"><a href="#渲染优化" class="headerlink" title="渲染优化"></a>渲染优化</h3><p>1.禁止使用iframe（阻塞父文档onload事件）</p><p>2.禁止使用gif图片实现loading效果（降低CPU消耗，提升渲染性能）</p><p>使用CSS3代码代替JS动画；</p><p>开启GPU加速；</p><p>使用base64位编码图片(不小图而言，大图不建议使用)对于一些小图标，可以使用base64位编码，以减少网络请求。但不建议大图使用，比较耗费CPU。小图标优势在于：</p><pre><code>1.减少HTTP请求；

2.避免文件跨域；

3.修改及时生效；
</code></pre></div><footer class="post-footer"><div class="post-tags"><a href="/tags/JavaScript/" rel="tag"># JavaScript</a> <a href="/tags/HTML/" rel="tag"># HTML</a> <a href="/tags/CSS/" rel="tag"># CSS</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2017/10/01/is_weixinis_iOS is_android/" rel="next" title="UA判断"><i class="fa fa-chevron-left"></i> UA判断</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2017/11/06/恢复stash暂存区clear或者drop的记录/" rel="prev" title="恢复stash暂存区clear或者drop的记录">恢复stash暂存区clear或者drop的记录 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/raul.jpg" alt="jiangwanwei"><p class="site-author-name" itemprop="name">jiangwanwei</p><p class="site-description motion-element" itemprop="description">A little ...</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">22</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">20</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Meta基础知识："><span class="nav-number">1.</span> <span class="nav-text">Meta基础知识：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#H5页面窗口自动调整到设备宽度，并禁止用户缩放页面"><span class="nav-number">1.1.</span> <span class="nav-text">H5页面窗口自动调整到设备宽度，并禁止用户缩放页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#空白页基本meta标签"><span class="nav-number">1.2.</span> <span class="nav-text">空白页基本meta标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他meta标签"><span class="nav-number">1.3.</span> <span class="nav-text">其他meta标签</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常见问题："><span class="nav-number">2.</span> <span class="nav-text">常见问题：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#移动端如何定义字体font-family"><span class="nav-number">2.1.</span> <span class="nav-text">移动端如何定义字体font-family</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打电话发短信写邮件怎么实现"><span class="nav-number">2.2.</span> <span class="nav-text">打电话发短信写邮件怎么实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#移动端touch事件（区分webkit和winphone）"><span class="nav-number">2.3.</span> <span class="nav-text">移动端touch事件（区分webkit和winphone）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#移动端click屏幕产生200-300ms的延时响应"><span class="nav-number">2.4.</span> <span class="nav-text">移动端click屏幕产生200-300ms的延时响应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rentina显示屏原理及设计方案"><span class="nav-number">2.5.</span> <span class="nav-text">Rentina显示屏原理及设计方案</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#点击元素产生背景或边框怎么去掉"><span class="nav-number">2.6.</span> <span class="nav-text">点击元素产生背景或边框怎么去掉</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#美化表单元素"><span class="nav-number">2.7.</span> <span class="nav-text">美化表单元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#移动端字体单位font-size选择px还是rem"><span class="nav-number">2.8.</span> <span class="nav-text">移动端字体单位font-size选择px还是rem</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#超实用的CSS样式"><span class="nav-number">2.9.</span> <span class="nav-text">超实用的CSS样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#取消input在ios下，输入的时候英文首字母的默认大写"><span class="nav-number">2.10.</span> <span class="nav-text">取消input在ios下，输入的时候英文首字母的默认大写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#手机拍照和上传图片"><span class="nav-number">2.11.</span> <span class="nav-text">手机拍照和上传图片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#屏幕旋转的事件和样式"><span class="nav-number">2.12.</span> <span class="nav-text">屏幕旋转的事件和样式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#audio元素和video元素在ios和andriod中无法自动播放"><span class="nav-number">3.</span> <span class="nav-text">audio元素和video元素在ios和andriod中无法自动播放</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#重力感应事件"><span class="nav-number">3.1.</span> <span class="nav-text">重力感应事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#微信浏览器用户调整字体大小后页面矬了，怎么阻止用户调整"><span class="nav-number">3.2.</span> <span class="nav-text">微信浏览器用户调整字体大小后页面矬了，怎么阻止用户调整</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#定位的坑"><span class="nav-number">3.3.</span> <span class="nav-text">定位的坑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#播放视频不全屏"><span class="nav-number">3.4.</span> <span class="nav-text">播放视频不全屏</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JS判断设备"><span class="nav-number">3.5.</span> <span class="nav-text">JS判断设备</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JS判断微信浏览器"><span class="nav-number">3.6.</span> <span class="nav-text">JS判断微信浏览器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#android-2-3-bug"><span class="nav-number">3.7.</span> <span class="nav-text">android 2.3 bug</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#android-4-x-bug"><span class="nav-number">3.8.</span> <span class="nav-text">android 4.x bug</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#消除transition闪屏"><span class="nav-number">3.9.</span> <span class="nav-text">消除transition闪屏</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#开启硬件加速"><span class="nav-number">3.10.</span> <span class="nav-text">开启硬件加速</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#渲染优化"><span class="nav-number">3.11.</span> <span class="nav-text">渲染优化</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2019</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">jiangwanwei</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div><span class="post-meta-divider">|</span><div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.3</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="https://cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script><script type="text/javascript" src="https://cdn.bootcss.com/velocity/1.2.1/velocity.min.js"></script><script type="text/javascript" src="https://cdn.bootcss.com/velocity/1.2.1/velocity.ui.min.js"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/three/three.min.js"></script><script type="text/javascript" src="/lib/three/canvas_sphere.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;w<0&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script></body></html><!-- rebuild by neat -->